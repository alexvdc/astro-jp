---
import Card from "../components/Card.astro";
import MainLayout from "../layouts/MainLayout.astro";
const allCharacters = await Astro.glob("../content/characters/jp1/*.md");
const allDinos = await Astro.glob("../content/dinos/jp1/*.md");
import * as summaryStory from "../content/summary/jp1/short.md";
import * as summaryStoryExtend from "../content/summary/jp1/extend.md";
---

<MainLayout pageTitle={"Jurassic Park I"}>
  <section class="summary-container dark">
    <div
      class="summary-container__content"
      set:html={summaryStory.compiledContent()}
    />
    <div
      class="summary-container__content--extend"
      set:html={summaryStoryExtend.compiledContent()}
    />
    <button class="btn" id="summaryExtend">+</button>
  </section>

  <section class="card-container light">
    <div class="card-container__content">
      {
        allCharacters.map((c) => (
          <Card
            name={c.frontmatter.name}
            image={c.frontmatter.image}
            description={c.compiledContent()}
          />
        ))
      }
    </div>
  </section>

  <section class="card-container dark">
    <div class="card-container__content">
      {
        allDinos.map((d) => (
          <Card
            name={d.frontmatter.name}
            image={d.frontmatter.image}
            description={d.compiledContent()}
          />
        ))
      }
    </div>
  </section>
</MainLayout>

<style>
  .card {
    position: relative;
    width: 225px;
    height: 300px;
    background-color: rgb(88, 194, 239);
    display: flex;
    align-items: center;
    flex-direction: column;
  }
  img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 300px;
    object-fit: cover;
  }

  .card-container.dark {
    width: 100%;
    padding: 4rem 1rem;
    background-color: rgb(50, 50, 49);
  }
  .card-container__content {
    padding: 2rem 0;
    margin: 0 auto;
    display: flex;
    flex-wrap: wrap;
    gap: 2rem;
    justify-content: center;
    max-width: 1280px;
    width: 80%;
  }

  .summary-container {
    padding: 2rem 0;
  }

  .summary-container__content {
    width: 80%;
    max-width: 1080px;
    display: flex;
    flex-direction: column;
    margin: 0 auto;
    gap: 1rem 0;
  }
  .summary-container__content--extend {
    padding: 2rem 0;
    margin: 0 auto;
    display: flex;
    flex-wrap: wrap;
    gap: 1rem 0rem;
    justify-content: center;
    max-width: 1080px;
    width: 80%;
    display: none;
  }
  .summary-container__content--extend.more {
    display: flex;
  }

  .dark {
    background-color: rgb(50, 50, 49);
    color: #f6f9ea;
  }

  .btn {
    display: block;
    text-align: center;
    margin: 0rem auto;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    border: none;
    cursor: pointer;
    margin-top: 1.5rem;
  }

  p {
    font-size: var(--step--2);
  }
</style>

<script>
  const btnExtend = document.querySelector("#summaryExtend");
  const summaryExtend = document.querySelector(".summary-container__content--extend");
  btnExtend.addEventListener("click", () => {
    summaryExtend.querySelector(".summary-container__content--extend")
    summaryExtend.classList.toggle("more");
    btnExtend.innerHTML === "+" ? btnExtend.innerHTML = "-" : btnExtend.innerHTML = "+";
  });
</script>
